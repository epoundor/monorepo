{"version":3,"file":"vue-docgen.js","sourceRoot":"","sources":["../../plugins/vue-docgen.ts"],"names":[],"mappings":";;;;;;AAAA,mDAAuC;AAEvC,gEAAuC;AAEvC,SAAgB,SAAS,CAAC,UAAiB;IACzC,OAAO;QACL,IAAI,EAAE,YAAY;QAElB,KAAK,CAAC,SAAS,CAAC,GAAW,EAAE,EAAU;YACrC,IAAI,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE;gBACvB,MAAM,QAAQ,GAAG,MAAM,IAAA,sBAAK,EAAC,EAAE,CAAC,CAAC;gBACjC,MAAM,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;gBAC5C,MAAM,CAAC,GAAG,IAAI,sBAAW,CAAC,GAAG,CAAC,CAAC;gBAC/B,MAAM,iBAAiB,GAAG,UAAU,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,uBAAuB,CAAC;gBACnF,CAAC,CAAC,MAAM,CAAC,IAAI,iBAAiB,mBAAmB,UAAU,EAAE,CAAC,CAAC;gBAE/D,OAAO;oBACL,IAAI,EAAE,CAAC,CAAC,QAAQ,EAAE;oBAClB,GAAG,EAAE,CAAC,CAAC,WAAW,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC;iBAChD,CAAC;aACH;QACH,CAAC;KACF,CAAC;AACJ,CAAC;AAnBD,8BAmBC","sourcesContent":["import { parse } from 'vue-docgen-api';\nimport type { Plugin } from 'vite';\nimport MagicString from 'magic-string';\n\nexport function vueDocgen(vueVersion: 2 | 3): Plugin {\n  return {\n    name: 'vue-docgen',\n\n    async transform(src: string, id: string) {\n      if (/\\.(vue)$/.test(id)) {\n        const metaData = await parse(id);\n        const metaSource = JSON.stringify(metaData);\n        const s = new MagicString(src);\n        const componentLocation = vueVersion === 3 ? '_sfc_main' : '__component__.exports';\n        s.append(`;${componentLocation}.__docgenInfo = ${metaSource}`);\n\n        return {\n          code: s.toString(),\n          map: s.generateMap({ hires: true, source: id }),\n        };\n      }\n    },\n  };\n}\n"]}